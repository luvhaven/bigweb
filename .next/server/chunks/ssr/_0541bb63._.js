module.exports=[66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},30656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},1237,a=>{"use strict";var b=a.i(95445);a.s(["pagesAPI",0,{async getAll(a){let c=b.supabase.from("pages").select("*, author:profiles(full_name, avatar_url)").order("created_at",{ascending:!1});a?.status&&(c=c.eq("status",a.status)),a?.author_id&&(c=c.eq("author_id",a.author_id));let{data:d,error:e}=await c;if(e)throw e;return d},async getById(a){let{data:c,error:d}=await b.supabase.from("pages").select("*, author:profiles(full_name, avatar_url)").eq("id",a).single();if(d)throw d;return c},async getBySlug(a){let{data:c,error:d}=await b.supabase.from("pages").select("*").eq("slug",a).single();if(d)throw d;return c},async create(a){let{data:c,error:d}=await b.supabase.from("pages").insert(a).select().single();if(d)throw d;return c},async update(a,c){let{data:d,error:e}=await b.supabase.from("pages").update(c).eq("id",a).select().single();if(e)throw e;return d},async delete(a){let{error:c}=await b.supabase.from("pages").delete().eq("id",a);if(c)throw c},async publish(a){let{data:c,error:d}=await b.supabase.from("pages").update({status:"published",published_at:new Date().toISOString()}).eq("id",a).select().single();if(d)throw d;return c},async incrementViews(a){let{error:c}=await b.supabase.rpc("increment_page_views",{page_id:a});if(c)throw c},async createVersion(a,c,d){let{data:e}=await b.supabase.from("page_versions").select("version_number").eq("page_id",a).order("version_number",{ascending:!1}).limit(1),f=e&&e.length>0?e[0].version_number+1:1,{data:g,error:h}=await b.supabase.from("page_versions").insert({page_id:a,content:c,version_number:f,created_by:d}).select().single();if(h)throw h;return g},async getVersions(a){let{data:c,error:d}=await b.supabase.from("page_versions").select("*, created_by:profiles(full_name)").eq("page_id",a).order("version_number",{ascending:!1});if(d)throw d;return c}}])},685,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(99570),f=a.i(66718),g=a.i(29246),h=a.i(80701),i=a.i(23292),j=a.i(1237),k=a.i(96221),l=a.i(14548),m=a.i(210),n=a.i(38246);function o({initialData:a,isEditing:o=!1}){let p=(0,d.useRouter)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({title:"",slug:"",content:"",status:"draft"});(0,c.useEffect)(()=>{a&&t({title:a.title||"",slug:a.slug||"",content:a.content||"",status:a.status||"draft"})},[a]);let u=async b=>{b.preventDefault(),r(!0);try{o&&a?.id?(await j.pagesAPI.update(a.id,s),i.toast.success("Page updated")):(await j.pagesAPI.create(s),i.toast.success("Page created")),p.push("/admin/pages"),p.refresh()}catch(a){i.toast.error("Failed to save page")}finally{r(!1)}};return(0,b.jsxs)("form",{onSubmit:u,className:"max-w-4xl space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(n.default,{href:"/admin/pages",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(m.ArrowLeft,{className:"w-4 h-4"})})}),(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-3xl font-bold",children:o?"Edit Page":"New Page"})})]}),(0,b.jsxs)(e.Button,{type:"submit",disabled:q,className:"bg-accent hover:bg-accent/90",children:[q?(0,b.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(l.Save,{className:"w-4 h-4 mr-2"}),"Save Page"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Page Title"}),(0,b.jsx)(f.Input,{required:!0,value:s.title,onChange:a=>t({...s,title:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Content (Markdown/HTML)"}),(0,b.jsx)(g.Textarea,{className:"min-h-[400px] font-mono",value:s.content,onChange:a=>t({...s,content:a.target.value})})]})]}),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Settings"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Slug"}),(0,b.jsx)(f.Input,{required:!0,value:s.slug,onChange:a=>t({...s,slug:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,b.jsxs)(h.Select,{value:s.status,onValueChange:a=>t({...s,status:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(h.SelectItem,{value:"published",children:"Published"}),(0,b.jsx)(h.SelectItem,{value:"archived",children:"Archived"})]})]})]})]})})]})]})}a.s(["default",()=>o])},39784,a=>{"use strict";var b=a.i(87924),c=a.i(685);function d(){return(0,b.jsx)(c.default,{})}a.s(["default",()=>d])}];

//# sourceMappingURL=_0541bb63._.js.map