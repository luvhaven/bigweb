module.exports=[77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},30656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},26755,a=>{"use strict";var b=a.i(95445);a.s(["blogAPI",0,{async getAllCategories(){let{data:a,error:c}=await b.supabase.from("blog_categories").select("*").order("name");if(c)throw c;return a},async createCategory(a){let{data:c,error:d}=await b.supabase.from("blog_categories").insert(a).select().single();if(d)throw d;return c},async getAllPosts(a){let c=b.supabase.from("blog_posts").select("*, author:profiles(full_name, avatar_url), category:blog_categories(name, slug)").order("created_at",{ascending:!1});a?.status&&(c=c.eq("status",a.status)),a?.category_id&&(c=c.eq("category_id",a.category_id));let{data:d,error:e}=await c;if(e)throw e;return d},async getPostById(a){let{data:c,error:d}=await b.supabase.from("blog_posts").select("*, author:profiles(full_name, avatar_url), category:blog_categories(*)").eq("id",a).single();if(d)throw d;return c},async getPostBySlug(a){let{data:c,error:d}=await b.supabase.from("blog_posts").select("*, author:profiles(full_name, avatar_url), category:blog_categories(*)").eq("slug",a).single();if(d)throw d;return c},async createPost(a){let{data:c,error:d}=await b.supabase.from("blog_posts").insert(a).select().single();if(d)throw d;return c},async updatePost(a,c){let{data:d,error:e}=await b.supabase.from("blog_posts").update(c).eq("id",a).select().single();if(e)throw e;return d},async deletePost(a){let{error:c}=await b.supabase.from("blog_posts").delete().eq("id",a);if(c)throw c},async publishPost(a){let{data:c,error:d}=await b.supabase.from("blog_posts").update({status:"published",published_at:new Date().toISOString()}).eq("id",a).select().single();if(d)throw d;return c}}])},3075,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(99570),f=a.i(66718),g=a.i(29246),h=a.i(26755),i=a.i(23292),j=a.i(210),k=a.i(14548),l=a.i(38246),m=a.i(80701);function n(){let a=(0,d.useRouter)(),n=(0,d.useParams)(),o=!!n?.id,[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({title:"",slug:"",excerpt:"",content:"",featured_image:"",category_id:"",tags:"",meta_title:"",meta_description:"",status:"draft"});(0,c.useEffect)(()=>{v(),o&&n.id&&w(n.id)},[o,n.id]);let v=async()=>{try{let a=await h.blogAPI.getAllCategories();q(a||[])}catch(a){console.error("Failed to load categories")}},w=async a=>{try{let b=await h.blogAPI.getPostById(a);u({title:b.title||"",slug:b.slug||"",excerpt:b.excerpt||"",content:JSON.stringify(b.content)||"",featured_image:b.featured_image||"",category_id:b.category_id||"",tags:b.tags?.join(", ")||"",meta_title:b.meta_title||"",meta_description:b.meta_description||"",status:b.status||"draft"})}catch(a){i.toast.error("Failed to load post")}},x=async b=>{b.preventDefault(),s(!0);try{let b={...t,content:t.content?JSON.parse(t.content):{},tags:t.tags.split(",").map(a=>a.trim()).filter(Boolean)};o&&n.id?(await h.blogAPI.updatePost(n.id,b),i.toast.success("Post updated")):(await h.blogAPI.createPost(b),i.toast.success("Post created")),a.push("/admin/blog")}catch(a){i.toast.error("Failed to save post")}finally{s(!1)}};return(0,b.jsxs)("form",{onSubmit:x,className:"space-y-8 max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(l.default,{href:"/admin/blog",children:(0,b.jsxs)(e.Button,{variant:"ghost",type:"button",children:[(0,b.jsx)(j.ArrowLeft,{className:"w-4 h-4 mr-2"})," Back"]})}),(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-3xl font-bold",children:o?"Edit Post":"New Post"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>u({...t,status:"draft"}),children:"Save Draft"}),(0,b.jsxs)(e.Button,{type:"submit",disabled:r,className:"bg-accent hover:bg-accent/90",children:[(0,b.jsx)(k.Save,{className:"w-4 h-4 mr-2"}),"published"===t.status?"Update":"Publish"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Title *"}),(0,b.jsx)(f.Input,{required:!0,value:t.title,onChange:a=>{u({...t,title:a.target.value,slug:a.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")})},placeholder:"Enter post title..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Slug"}),(0,b.jsx)(f.Input,{value:t.slug,onChange:a=>u({...t,slug:a.target.value}),placeholder:"post-slug"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Excerpt"}),(0,b.jsx)(g.Textarea,{value:t.excerpt,onChange:a=>u({...t,excerpt:a.target.value}),placeholder:"Brief description...",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Content (JSON/Markdown)"}),(0,b.jsx)(g.Textarea,{value:t.content,onChange:a=>u({...t,content:a.target.value}),placeholder:'{"blocks": []}',className:"min-h-[400px] font-mono text-sm"})]}),(0,b.jsxs)("div",{className:"space-y-4 p-6 bg-secondary/10 rounded-xl",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"SEO Settings"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Meta Title"}),(0,b.jsx)(f.Input,{value:t.meta_title,onChange:a=>u({...t,meta_title:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Meta Description"}),(0,b.jsx)(g.Textarea,{value:t.meta_description,onChange:a=>u({...t,meta_description:a.target.value}),rows:3})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Settings"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,b.jsxs)(m.Select,{value:t.status,onValueChange:a=>u({...t,status:a}),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(m.SelectItem,{value:"published",children:"Published"}),(0,b.jsx)(m.SelectItem,{value:"scheduled",children:"Scheduled"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Category"}),(0,b.jsxs)(m.Select,{value:t.category_id,onValueChange:a=>u({...t,category_id:a}),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(m.SelectContent,{children:p.map(a=>(0,b.jsx)(m.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Tags (comma separated)"}),(0,b.jsx)(f.Input,{value:t.tags,onChange:a=>u({...t,tags:a.target.value}),placeholder:"tech, design, tutorial"})]})]}),(0,b.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Featured Image"}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(f.Input,{value:t.featured_image,onChange:a=>u({...t,featured_image:a.target.value}),placeholder:"Image URL"})}),t.featured_image&&(0,b.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden bg-secondary",children:(0,b.jsx)("img",{src:t.featured_image,alt:"Preview",className:"w-full h-full object-cover"})})]})]})]})]})}a.s(["default",()=>n])},11072,a=>{"use strict";var b=a.i(87924),c=a.i(3075);function d(){return(0,b.jsx)(c.default,{})}a.s(["default",()=>d])}];

//# sourceMappingURL=_d8a1e30f._.js.map