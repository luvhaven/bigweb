module.exports=[63519,a=>{"use strict";let b=(0,a.i(70106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],63519)},92759,a=>{"use strict";let b=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},93769,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(92258),g=a.i(63519);let h=(0,a.i(70106).default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var i=a.i(92759),j=a.i(81560),k=a.i(38246),l=a.i(95445);let m={async getAll(a){let b=l.supabase.from("contact_submissions").select("*").order("created_at",{ascending:!1});a?.status&&(b=b.eq("status",a.status));let{data:c,error:d}=await b;if(d)throw d;return c},async getById(a){let{data:b,error:c}=await l.supabase.from("contact_submissions").select("*, replied_by:profiles(full_name)").eq("id",a).single();if(c)throw c;return b},async create(a){let{data:b,error:c}=await l.supabase.from("contact_submissions").insert(a).select().single();if(c)throw c;return b},async updateStatus(a,b){let{data:c,error:d}=await l.supabase.from("contact_submissions").update({status:b}).eq("id",a).select().single();if(d)throw d;return c},async markAsReplied(a,b,c){let{data:d,error:e}=await l.supabase.from("contact_submissions").update({status:"replied",replied_at:new Date().toISOString(),replied_by:b,notes:c}).eq("id",a).select().single();if(e)throw e;return d},async delete(a){let{error:b}=await l.supabase.from("contact_submissions").delete().eq("id",a);if(b)throw b},async exportToCSV(){let{data:a,error:b}=await l.supabase.from("contact_submissions").select("*").order("created_at",{ascending:!1});if(b)throw b;return a&&0!==a.length?[Object.keys(a[0]).join(","),...a.map(a=>Object.values(a).map(a=>"string"==typeof a&&a.includes(",")?`"${a}"`:a).join(","))].join("\n"):""}};var n=a.i(42463),o=a.i(99570),p=a.i(29246),q=a.i(23292);function r(){let a=(0,d.useParams)(),l=(0,d.useRouter)(),{user:r}=(0,n.useAuth)(),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!0);(0,c.useEffect)(()=>{a.id&&(y(a.id),z())},[a.id]);let y=async a=>{try{let b=await m.getById(a);t(b)}catch(a){q.toast.error("Failed to load submission")}finally{x(!1)}},z=async()=>{if(a.id)try{await m.updateStatus(a.id,"read")}catch(a){console.error("Failed to mark as read")}},A=async()=>{if(r&&u.trim())try{await m.markAsReplied(a.id,r.id,u),q.toast.success("Marked as replied"),l.push("/admin/contacts")}catch(a){q.toast.error("Failed to save reply")}},B=async()=>{if(confirm("Delete this submission?"))try{await m.delete(a.id),q.toast.success("Submission deleted"),l.push("/admin/contacts")}catch(a){q.toast.error("Failed to delete")}};return w?(0,b.jsx)("div",{className:"text-center py-20",children:"Loading..."}):s?(0,b.jsxs)("div",{className:"space-y-8 max-w-4xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.default,{href:"/admin/contacts",children:(0,b.jsxs)(o.Button,{variant:"ghost",children:[(0,b.jsx)(e.ArrowLeft,{className:"w-4 h-4 mr-2"})," Back to Submissions"]})}),(0,b.jsxs)(o.Button,{variant:"ghost",className:"text-red-500",onClick:B,children:[(0,b.jsx)(j.Trash2,{className:"w-4 h-4 mr-2"})," Delete"]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:s.name}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"new"===s.status?"bg-blue-500/10 text-blue-500":"replied"===s.status?"bg-green-500/10 text-green-500":"bg-secondary text-muted-foreground"}`,children:s.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(f.Mail,{className:"w-4 h-4"}),(0,b.jsx)("a",{href:`mailto:${s.email}`,className:"hover:text-accent",children:s.email})]}),s.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(g.Phone,{className:"w-4 h-4"}),(0,b.jsx)("a",{href:`tel:${s.phone}`,className:"hover:text-accent",children:s.phone})]}),s.company&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(h,{className:"w-4 h-4"}),s.company]}),(0,b.jsx)("div",{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleString()})]})]}),s.subject&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Subject"}),(0,b.jsx)("p",{className:"font-semibold",children:s.subject})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Message"}),(0,b.jsx)("div",{className:"bg-secondary/20 p-6 rounded-xl",children:(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:s.message})})]}),"replied"!==s.status&&(0,b.jsxs)("div",{className:"pt-6 border-t border-border space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Reply"}),(0,b.jsx)(p.Textarea,{value:u,onChange:a=>v(a.target.value),placeholder:"Type your reply here...",rows:6,className:"resize-none"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(o.Button,{onClick:A,disabled:!u.trim(),className:"bg-accent hover:bg-accent/90",children:[(0,b.jsx)(i.Send,{className:"w-4 h-4 mr-2"})," Mark as Replied"]}),(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>v(""),children:"Clear"})]})]}),s.replied_at&&(0,b.jsxs)("div",{className:"pt-6 border-t border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[(0,b.jsx)(i.Send,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-medium",children:"Replied"})]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(s.replied_at).toLocaleString()}),s.notes&&(0,b.jsx)("div",{className:"mt-3 bg-secondary/20 p-4 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:s.notes})})]})]})]}):(0,b.jsx)("div",{className:"text-center py-20",children:"Submission not found"})}a.s(["default",()=>r],93769)}];

//# sourceMappingURL=_df117fd6._.js.map