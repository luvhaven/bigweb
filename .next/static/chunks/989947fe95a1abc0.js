(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let l=s.forwardRef(({className:e,type:s,...l},r)=>(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...l}));l.displayName="Input",e.s(["Input",()=>l])},56909,e=>{"use strict";let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},24687,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let l=s.forwardRef(({className:e,...s},l)=>(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));l.displayName="Textarea",e.s(["Textarea",()=>l])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},99682,e=>{"use strict";var t=e.i(71645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},70152,e=>{"use strict";function t(e,[t,s]){return Math.min(s,Math.max(t,e))}e.s(["clamp",()=>t])},41759,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(19455),r=e.i(93479),i=e.i(24687),c=e.i(11795);let o={async getAllCategories(){let{data:e,error:t}=await c.supabase.from("blog_categories").select("*").order("name");if(t)throw t;return e},async createCategory(e){let{data:t,error:s}=await c.supabase.from("blog_categories").insert(e).select().single();if(s)throw s;return t},async getAllPosts(e){let t=c.supabase.from("blog_posts").select("*, author:profiles(full_name, avatar_url), category:blog_categories(name, slug)").order("created_at",{ascending:!1});e?.status&&(t=t.eq("status",e.status)),e?.category_id&&(t=t.eq("category_id",e.category_id));let{data:s,error:a}=await t;if(a)throw a;return s},async getPostById(e){let{data:t,error:s}=await c.supabase.from("blog_posts").select("*, author:profiles(full_name, avatar_url), category:blog_categories(*)").eq("id",e).single();if(s)throw s;return t},async getPostBySlug(e){let{data:t,error:s}=await c.supabase.from("blog_posts").select("*, author:profiles(full_name, avatar_url), category:blog_categories(*)").eq("slug",e).single();if(s)throw s;return t},async createPost(e){let{data:t,error:s}=await c.supabase.from("blog_posts").insert(e).select().single();if(s)throw s;return t},async updatePost(e,t){let{data:s,error:a}=await c.supabase.from("blog_posts").update(t).eq("id",e).select().single();if(a)throw a;return s},async deletePost(e){let{error:t}=await c.supabase.from("blog_posts").delete().eq("id",e);if(t)throw t},async publishPost(e){let{data:t,error:s}=await c.supabase.from("blog_posts").update({status:"published",published_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return t}};var n=e.i(46696),d=e.i(71689),u=e.i(56909),m=e.i(22016),g=e.i(67489);function p(){let e=(0,a.useRouter)(),c=(0,a.useParams)(),p=!!c?.id,[h,f]=(0,s.useState)([]),[x,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)({title:"",slug:"",excerpt:"",content:"",featured_image:"",category_id:"",tags:"",meta_title:"",meta_description:"",status:"draft"});(0,s.useEffect)(()=>{j(),p&&c.id&&N(c.id)},[p,c.id]);let j=async()=>{try{let e=await o.getAllCategories();f(e||[])}catch(e){console.error("Failed to load categories")}},N=async e=>{try{let t=await o.getPostById(e);y({title:t.title||"",slug:t.slug||"",excerpt:t.excerpt||"",content:JSON.stringify(t.content)||"",featured_image:t.featured_image||"",category_id:t.category_id||"",tags:t.tags?.join(", ")||"",meta_title:t.meta_title||"",meta_description:t.meta_description||"",status:t.status||"draft"})}catch(e){n.toast.error("Failed to load post")}},_=async t=>{t.preventDefault(),b(!0);try{let t={...v,content:v.content?JSON.parse(v.content):{},tags:v.tags.split(",").map(e=>e.trim()).filter(Boolean)};p&&c.id?(await o.updatePost(c.id,t),n.toast.success("Post updated")):(await o.createPost(t),n.toast.success("Post created")),e.push("/admin/blog")}catch(e){n.toast.error("Failed to save post")}finally{b(!1)}};return(0,t.jsxs)("form",{onSubmit:_,className:"space-y-8 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(m.default,{href:"/admin/blog",children:(0,t.jsxs)(l.Button,{variant:"ghost",type:"button",children:[(0,t.jsx)(d.ArrowLeft,{className:"w-4 h-4 mr-2"})," Back"]})}),(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-3xl font-bold",children:p?"Edit Post":"New Post"})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>y({...v,status:"draft"}),children:"Save Draft"}),(0,t.jsxs)(l.Button,{type:"submit",disabled:x,className:"bg-accent hover:bg-accent/90",children:[(0,t.jsx)(u.Save,{className:"w-4 h-4 mr-2"}),"published"===v.status?"Update":"Publish"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Title *"}),(0,t.jsx)(r.Input,{required:!0,value:v.title,onChange:e=>{y({...v,title:e.target.value,slug:e.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")})},placeholder:"Enter post title..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Slug"}),(0,t.jsx)(r.Input,{value:v.slug,onChange:e=>y({...v,slug:e.target.value}),placeholder:"post-slug"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Excerpt"}),(0,t.jsx)(i.Textarea,{value:v.excerpt,onChange:e=>y({...v,excerpt:e.target.value}),placeholder:"Brief description...",rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Content (JSON/Markdown)"}),(0,t.jsx)(i.Textarea,{value:v.content,onChange:e=>y({...v,content:e.target.value}),placeholder:'{"blocks": []}',className:"min-h-[400px] font-mono text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-4 p-6 bg-secondary/10 rounded-xl",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"SEO Settings"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Meta Title"}),(0,t.jsx)(r.Input,{value:v.meta_title,onChange:e=>y({...v,meta_title:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Meta Description"}),(0,t.jsx)(i.Textarea,{value:v.meta_description,onChange:e=>y({...v,meta_description:e.target.value}),rows:3})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Settings"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,t.jsxs)(g.Select,{value:v.status,onValueChange:e=>y({...v,status:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"draft",children:"Draft"}),(0,t.jsx)(g.SelectItem,{value:"published",children:"Published"}),(0,t.jsx)(g.SelectItem,{value:"scheduled",children:"Scheduled"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Category"}),(0,t.jsxs)(g.Select,{value:v.category_id,onValueChange:e=>y({...v,category_id:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{placeholder:"Select category"})}),(0,t.jsx)(g.SelectContent,{children:h.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Tags (comma separated)"}),(0,t.jsx)(r.Input,{value:v.tags,onChange:e=>y({...v,tags:e.target.value}),placeholder:"tech, design, tutorial"})]})]}),(0,t.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Featured Image"}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(r.Input,{value:v.featured_image,onChange:e=>y({...v,featured_image:e.target.value}),placeholder:"Image URL"})}),v.featured_image&&(0,t.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden bg-secondary",children:(0,t.jsx)("img",{src:v.featured_image,alt:"Preview",className:"w-full h-full object-cover"})})]})]})]})]})}e.s(["default",()=>p],41759)}]);