(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14764,e=>{"use strict";let s=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>s],14764)},43432,e=>{"use strict";let s=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>s],43432)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},24687,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));r.displayName="Textarea",e.s(["Textarea",()=>r])},30581,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(71689),i=e.i(63488),l=e.i(43432);let d=(0,e.i(75254).default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var c=e.i(14764),n=e.i(27612),o=e.i(22016),m=e.i(11795);let u={async getAll(e){let s=m.supabase.from("contact_submissions").select("*").order("created_at",{ascending:!1});e?.status&&(s=s.eq("status",e.status));let{data:t,error:a}=await s;if(a)throw a;return t},async getById(e){let{data:s,error:t}=await m.supabase.from("contact_submissions").select("*, replied_by:profiles(full_name)").eq("id",e).single();if(t)throw t;return s},async create(e){let{data:s,error:t}=await m.supabase.from("contact_submissions").insert(e).select().single();if(t)throw t;return s},async updateStatus(e,s){let{data:t,error:a}=await m.supabase.from("contact_submissions").update({status:s}).eq("id",e).select().single();if(a)throw a;return t},async markAsReplied(e,s,t){let{data:a,error:r}=await m.supabase.from("contact_submissions").update({status:"replied",replied_at:new Date().toISOString(),replied_by:s,notes:t}).eq("id",e).select().single();if(r)throw r;return a},async delete(e){let{error:s}=await m.supabase.from("contact_submissions").delete().eq("id",e);if(s)throw s},async exportToCSV(){let{data:e,error:s}=await m.supabase.from("contact_submissions").select("*").order("created_at",{ascending:!1});if(s)throw s;return e&&0!==e.length?[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).map(e=>"string"==typeof e&&e.includes(",")?`"${e}"`:e).join(","))].join("\n"):""}};var h=e.i(66643),x=e.i(19455),p=e.i(24687),f=e.i(46696);function b(){let e=(0,a.useParams)(),m=(0,a.useRouter)(),{user:b}=(0,h.useAuth)(),[y,g]=(0,t.useState)(null),[j,v]=(0,t.useState)(""),[w,N]=(0,t.useState)(!0);(0,t.useEffect)(()=>{e.id&&(k(e.id),M())},[e.id]);let k=async e=>{try{let s=await u.getById(e);g(s)}catch(e){f.toast.error("Failed to load submission")}finally{N(!1)}},M=async()=>{if(e.id)try{await u.updateStatus(e.id,"read")}catch(e){console.error("Failed to mark as read")}},S=async()=>{if(b&&j.trim())try{await u.markAsReplied(e.id,b.id,j),f.toast.success("Marked as replied"),m.push("/admin/contacts")}catch(e){f.toast.error("Failed to save reply")}},_=async()=>{if(confirm("Delete this submission?"))try{await u.delete(e.id),f.toast.success("Submission deleted"),m.push("/admin/contacts")}catch(e){f.toast.error("Failed to delete")}};return w?(0,s.jsx)("div",{className:"text-center py-20",children:"Loading..."}):y?(0,s.jsxs)("div",{className:"space-y-8 max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o.default,{href:"/admin/contacts",children:(0,s.jsxs)(x.Button,{variant:"ghost",children:[(0,s.jsx)(r.ArrowLeft,{className:"w-4 h-4 mr-2"})," Back to Submissions"]})}),(0,s.jsxs)(x.Button,{variant:"ghost",className:"text-red-500",onClick:_,children:[(0,s.jsx)(n.Trash2,{className:"w-4 h-4 mr-2"})," Delete"]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-xl p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:y.name}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"new"===y.status?"bg-blue-500/10 text-blue-500":"replied"===y.status?"bg-green-500/10 text-green-500":"bg-secondary text-muted-foreground"}`,children:y.status})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(i.Mail,{className:"w-4 h-4"}),(0,s.jsx)("a",{href:`mailto:${y.email}`,className:"hover:text-accent",children:y.email})]}),y.phone&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(l.Phone,{className:"w-4 h-4"}),(0,s.jsx)("a",{href:`tel:${y.phone}`,className:"hover:text-accent",children:y.phone})]}),y.company&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(d,{className:"w-4 h-4"}),y.company]}),(0,s.jsx)("div",{className:"text-muted-foreground",children:new Date(y.created_at).toLocaleString()})]})]}),y.subject&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Subject"}),(0,s.jsx)("p",{className:"font-semibold",children:y.subject})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Message"}),(0,s.jsx)("div",{className:"bg-secondary/20 p-6 rounded-xl",children:(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:y.message})})]}),"replied"!==y.status&&(0,s.jsxs)("div",{className:"pt-6 border-t border-border space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Reply"}),(0,s.jsx)(p.Textarea,{value:j,onChange:e=>v(e.target.value),placeholder:"Type your reply here...",rows:6,className:"resize-none"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(x.Button,{onClick:S,disabled:!j.trim(),className:"bg-accent hover:bg-accent/90",children:[(0,s.jsx)(c.Send,{className:"w-4 h-4 mr-2"})," Mark as Replied"]}),(0,s.jsx)(x.Button,{variant:"outline",onClick:()=>v(""),children:"Clear"})]})]}),y.replied_at&&(0,s.jsxs)("div",{className:"pt-6 border-t border-border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[(0,s.jsx)(c.Send,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"font-medium",children:"Replied"})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(y.replied_at).toLocaleString()}),y.notes&&(0,s.jsx)("div",{className:"mt-3 bg-secondary/20 p-4 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:y.notes})})]})]})]}):(0,s.jsx)("div",{className:"text-center py-20",children:"Submission not found"})}e.s(["default",()=>b],30581)}]);