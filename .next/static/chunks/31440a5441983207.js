(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=t.forwardRef(({className:e,type:t,...r},i)=>(0,s.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));r.displayName="Input",e.s(["Input",()=>r])},31278,e=>{"use strict";let s=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},56909,e=>{"use strict";let s=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],56909)},24687,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));r.displayName="Textarea",e.s(["Textarea",()=>r])},71689,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},99682,e=>{"use strict";var s=e.i(71645);function t(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>t])},70152,e=>{"use strict";function s(e,[s,t]){return Math.min(t,Math.max(s,e))}e.s(["clamp",()=>s])},42025,e=>{"use strict";var s=e.i(11795);e.s(["pagesAPI",0,{async getAll(e){let t=s.supabase.from("pages").select("*, author:profiles(full_name, avatar_url)").order("created_at",{ascending:!1});e?.status&&(t=t.eq("status",e.status)),e?.author_id&&(t=t.eq("author_id",e.author_id));let{data:a,error:r}=await t;if(r)throw r;return a},async getById(e){let{data:t,error:a}=await s.supabase.from("pages").select("*, author:profiles(full_name, avatar_url)").eq("id",e).single();if(a)throw a;return t},async getBySlug(e){let{data:t,error:a}=await s.supabase.from("pages").select("*").eq("slug",e).single();if(a)throw a;return t},async create(e){let{data:t,error:a}=await s.supabase.from("pages").insert(e).select().single();if(a)throw a;return t},async update(e,t){let{data:a,error:r}=await s.supabase.from("pages").update(t).eq("id",e).select().single();if(r)throw r;return a},async delete(e){let{error:t}=await s.supabase.from("pages").delete().eq("id",e);if(t)throw t},async publish(e){let{data:t,error:a}=await s.supabase.from("pages").update({status:"published",published_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return t},async incrementViews(e){let{error:t}=await s.supabase.rpc("increment_page_views",{page_id:e});if(t)throw t},async createVersion(e,t,a){let{data:r}=await s.supabase.from("page_versions").select("version_number").eq("page_id",e).order("version_number",{ascending:!1}).limit(1),i=r&&r.length>0?r[0].version_number+1:1,{data:l,error:n}=await s.supabase.from("page_versions").insert({page_id:e,content:t,version_number:i,created_by:a}).select().single();if(n)throw n;return l},async getVersions(e){let{data:t,error:a}=await s.supabase.from("page_versions").select("*, created_by:profiles(full_name)").eq("page_id",e).order("version_number",{ascending:!1});if(a)throw a;return t}}])},95461,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(19455),i=e.i(93479),l=e.i(24687),n=e.i(67489),u=e.i(46696),c=e.i(42025),d=e.i(31278),o=e.i(56909),f=e.i(71689),m=e.i(22016);function p({initialData:e,isEditing:p=!1}){let g=(0,a.useRouter)(),[h,x]=(0,t.useState)(!1),[b,v]=(0,t.useState)({title:"",slug:"",content:"",status:"draft"});(0,t.useEffect)(()=>{e&&v({title:e.title||"",slug:e.slug||"",content:e.content||"",status:e.status||"draft"})},[e]);let w=async s=>{s.preventDefault(),x(!0);try{p&&e?.id?(await c.pagesAPI.update(e.id,b),u.toast.success("Page updated")):(await c.pagesAPI.create(b),u.toast.success("Page created")),g.push("/admin/pages"),g.refresh()}catch(e){u.toast.error("Failed to save page")}finally{x(!1)}};return(0,s.jsxs)("form",{onSubmit:w,className:"max-w-4xl space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(m.default,{href:"/admin/pages",children:(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(f.ArrowLeft,{className:"w-4 h-4"})})}),(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-3xl font-bold",children:p?"Edit Page":"New Page"})})]}),(0,s.jsxs)(r.Button,{type:"submit",disabled:h,className:"bg-accent hover:bg-accent/90",children:[h?(0,s.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(o.Save,{className:"w-4 h-4 mr-2"}),"Save Page"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Page Title"}),(0,s.jsx)(i.Input,{required:!0,value:b.title,onChange:e=>v({...b,title:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Content (Markdown/HTML)"}),(0,s.jsx)(l.Textarea,{className:"min-h-[400px] font-mono",value:b.content,onChange:e=>v({...b,content:e.target.value})})]})]}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Settings"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Slug"}),(0,s.jsx)(i.Input,{required:!0,value:b.slug,onChange:e=>v({...b,slug:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,s.jsxs)(n.Select,{value:b.status,onValueChange:e=>v({...b,status:e}),children:[(0,s.jsx)(n.SelectTrigger,{children:(0,s.jsx)(n.SelectValue,{})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"draft",children:"Draft"}),(0,s.jsx)(n.SelectItem,{value:"published",children:"Published"}),(0,s.jsx)(n.SelectItem,{value:"archived",children:"Archived"})]})]})]})]})})]})]})}e.s(["default",()=>p])},20077,e=>{"use strict";var s=e.i(43476),t=e.i(95461);function a(){return(0,s.jsx)(t.default,{})}e.s(["default",()=>a])}]);