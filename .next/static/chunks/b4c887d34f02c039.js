(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=a.forwardRef(({className:e,type:a,...i},l)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:l,...i}));i.displayName="Input",e.s(["Input",()=>i])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},23585,e=>{"use strict";let t=(0,e.i(75254).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},98043,e=>{"use strict";var t=e.i(66027),a=e.i(54616),s=e.i(12598);let i=(0,e.i(24632).createClient)("https://krstrtqdnvxzvmiphhwm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtyc3RydHFkbnZ4enZtaXBoaHdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwODA3MzIsImV4cCI6MjA3OTY1NjczMn0.0pE8vhH867zDOnTbX0RVx8XI9l8CT9D1uPLOMOQgTdE");function l(){return(0,t.useQuery)({queryKey:["blog-posts"],queryFn:async()=>{let{data:e,error:t}=await i.from("blog_posts").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}})}function r(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{data:t,error:a}=await i.from("blog_posts").insert([e]).select().single();if(a)throw a;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["blog-posts"]})}})}function n(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({id:e,...t})=>{let{data:a,error:s}=await i.from("blog_posts").update(t).eq("id",e).select().single();if(s)throw s;return a},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["blog-posts"]}),e.invalidateQueries({queryKey:["blog-posts",a.id]})}})}function o(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{error:t}=await i.from("blog_posts").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e.invalidateQueries({queryKey:["blog-posts"]})}})}function c(e){return(0,t.useQuery)({queryKey:["media-files",e],queryFn:async()=>{let t=i.from("media_library").select("*").order("created_at",{ascending:!1});e&&(t=t.eq("folder",e));let{data:a,error:s}=await t;if(s)throw s;return a}})}function d(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({file:e,folder:t="uncategorized"})=>{let a=e.name.split(".").pop(),s=`${Date.now()}-${Math.random().toString(36).substring(7)}.${a}`,l=`${t}/${s}`,{data:r,error:n}=await i.storage.from("media").upload(l,e);if(n)throw n;let{data:{publicUrl:o}}=i.storage.from("media").getPublicUrl(l),{data:c,error:d}=await i.from("media_library").insert([{filename:s,original_filename:e.name,file_path:o,file_size:e.size,mime_type:e.type,folder:t}]).select().single();if(d)throw d;return c},onSuccess:()=>{e.invalidateQueries({queryKey:["media-files"]})}})}function u(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{data:t}=await i.from("media_library").select("file_path").eq("id",e).single();if(t){let e=t.file_path.split("/").slice(-2).join("/");await i.storage.from("media").remove([e])}let{error:a}=await i.from("media_library").delete().eq("id",e);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["media-files"]})}})}function m(){return(0,t.useQuery)({queryKey:["site-settings"],queryFn:async()=>{let{data:e,error:t}=await i.from("site_settings").select("*").order("key");if(t)throw t;return e}})}function p(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({key:e,value:t})=>{let{data:a,error:s}=await i.from("site_settings").update({value:t}).eq("key",e).select().single();if(s)throw s;return a},onSuccess:()=>{e.invalidateQueries({queryKey:["site-settings"]})}})}e.s(["useBlogPosts",()=>l,"useCreateBlogPost",()=>r,"useDeleteBlogPost",()=>o,"useDeleteMedia",()=>u,"useMediaFiles",()=>c,"useSiteSettings",()=>m,"useUpdateBlogPost",()=>n,"useUpdateSiteSetting",()=>p,"useUploadMedia",()=>d])},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},96272,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(46932),i=e.i(88653),l=e.i(69074),r=e.i(55436),n=e.i(75254);let o=(0,n.default)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var c=e.i(73708);let d=(0,n.default)("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);var u=e.i(78583),m=e.i(23585),p=e.i(27612),h=e.i(40160),f=e.i(86536),x=e.i(31278),g=e.i(43531),y=e.i(19455),v=e.i(93479),b=e.i(1386),j=e.i(55146),w=e.i(76639),N=e.i(98043),k=e.i(75157),z=e.i(5766);let C=[{name:"All Files",value:null},{name:"Blog",value:"blog"},{name:"Portfolio",value:"portfolio"},{name:"Services",value:"services"},{name:"Uncategorized",value:"uncategorized"}];function M(){let[e,n]=(0,a.useState)(null),[M,D]=(0,a.useState)(""),[_,F]=(0,a.useState)(null),[S,q]=(0,a.useState)(!1),[I,U]=(0,a.useState)(!1),[Q,B]=(0,a.useState)(!1),{data:T,isLoading:P}=(0,N.useMediaFiles)(e||void 0),L=(0,N.useUploadMedia)(),O=(0,N.useDeleteMedia)(),A=T?.filter(e=>e.original_filename.toLowerCase().includes(M.toLowerCase())||e.alt_text?.toLowerCase().includes(M.toLowerCase())),K=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?B(!0):"dragleave"===e.type&&B(!1)},H=async t=>{for(let a of(t.preventDefault(),t.stopPropagation(),B(!1),Array.from(t.dataTransfer.files)))try{await L.mutateAsync({file:a,folder:e||"uncategorized"}),z.default.success(`Uploaded ${a.name}`)}catch(e){z.default.error(`Failed to upload ${a.name}`)}},V=async t=>{for(let a of Array.from(t.target.files||[]))try{await L.mutateAsync({file:a,folder:e||"uncategorized"}),z.default.success(`Uploaded ${a.name}`)}catch(e){z.default.error(`Failed to upload ${a.name}`)}q(!1)},E=async()=>{if(_)try{await O.mutateAsync(_.id),z.default.success("File deleted successfully"),U(!1),F(null)}catch(e){z.default.error("Failed to delete file")}},$=e=>{navigator.clipboard.writeText(e),z.default.success("URL copied to clipboard")};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Media Library"}),(0,t.jsx)("p",{className:"text-zinc-400 mt-1",children:"Upload and manage your media files"})]}),(0,t.jsxs)(y.Button,{onClick:()=>q(!0),className:"bg-emerald-500 hover:bg-emerald-600",children:[(0,t.jsx)(l.Upload,{className:"w-4 h-4 mr-2"}),"Upload Files"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(b.GlassCard,{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-zinc-400 mb-3",children:"Folders"}),(0,t.jsx)("div",{className:"space-y-1",children:C.map(a=>(0,t.jsxs)("button",{onClick:()=>n(a.value),className:(0,k.cn)("w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",e===a.value?"bg-emerald-500/10 text-emerald-500":"text-zinc-400 hover:text-white hover:bg-zinc-800/50"),children:[(0,t.jsx)(o,{className:"w-4 h-4"}),a.name]},a.name))})]}),(0,t.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,t.jsx)(b.GlassCard,{className:"p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),(0,t.jsx)(v.Input,{placeholder:"Search files...",value:M,onChange:e=>D(e.target.value),className:"pl-10 bg-zinc-800/50 border-zinc-700 text-white"})]})}),P?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4,5,6].map(e=>(0,t.jsx)(b.GlassCard,{className:"aspect-square p-2",children:(0,t.jsx)(b.Skeleton,{className:"w-full h-full rounded"})},e))}):A?.length===0?(0,t.jsx)(b.EmptyState,{icon:(0,t.jsx)(c.Image,{className:"w-8 h-8"}),title:"No files yet",description:"Upload your first file to get started.",action:(0,t.jsxs)(y.Button,{onClick:()=>q(!0),className:"bg-emerald-500 hover:bg-emerald-600",children:[(0,t.jsx)(l.Upload,{className:"w-4 h-4 mr-2"}),"Upload Files"]})}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:(0,t.jsx)(i.AnimatePresence,{children:A?.map(e=>{var a,i;let l=(a=e.mime_type).startsWith("image/")?c.Image:a.startsWith("video/")?d:u.FileText;return(0,t.jsx)(s.motion.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:(0,t.jsxs)(b.GlassCard,{className:"group relative aspect-square overflow-hidden",children:[e.mime_type.startsWith("image/")?(0,t.jsx)("img",{src:e.file_path,alt:e.alt_text||e.original_filename,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-zinc-800",children:(0,t.jsx)(l,{className:"w-12 h-12 text-zinc-600"})}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col",children:[(0,t.jsxs)("div",{className:"p-2 flex justify-end gap-1",children:[(0,t.jsx)(y.Button,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:()=>$(e.file_path),children:(0,t.jsx)(g.Check,{className:"w-4 h-4"})}),(0,t.jsxs)(j.DropdownMenu,{children:[(0,t.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(y.Button,{size:"icon",variant:"secondary",className:"h-8 w-8",children:(0,t.jsx)(m.MoreVertical,{className:"w-4 h-4"})})}),(0,t.jsxs)(j.DropdownMenuContent,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>window.open(e.file_path,"_blank"),className:"text-zinc-300",children:[(0,t.jsx)(f.Eye,{className:"w-4 h-4 mr-2"}),"View"]}),(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>$(e.file_path),className:"text-zinc-300",children:[(0,t.jsx)(h.Download,{className:"w-4 h-4 mr-2"}),"Copy URL"]}),(0,t.jsx)(j.DropdownMenuSeparator,{className:"bg-zinc-800"}),(0,t.jsxs)(j.DropdownMenuItem,{onClick:()=>{F(e),U(!0)},className:"text-red-400",children:[(0,t.jsx)(p.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"p-2 bg-gradient-to-t from-black/80 to-transparent",children:[(0,t.jsx)("p",{className:"text-white text-xs font-medium truncate",children:e.original_filename}),(0,t.jsx)("p",{className:"text-zinc-400 text-xs",children:(i=e.file_size)<1024?i+" B":i<1048576?(i/1024).toFixed(1)+" KB":(i/1048576).toFixed(1)+" MB"})]})]})]})},e.id)})})})]})]}),(0,t.jsx)(w.Dialog,{open:S,onOpenChange:q,children:(0,t.jsxs)(w.DialogContent,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(w.DialogHeader,{children:(0,t.jsx)(w.DialogTitle,{className:"text-white",children:"Upload Files"})}),(0,t.jsxs)("div",{className:(0,k.cn)("relative border-2 border-dashed rounded-lg p-12 text-center transition-colors",Q?"border-emerald-500 bg-emerald-500/10":"border-zinc-700 hover:border-zinc-600"),onDragEnter:K,onDragLeave:K,onDragOver:K,onDrop:H,children:[(0,t.jsx)("input",{type:"file",multiple:!0,onChange:V,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,t.jsx)(l.Upload,{className:"w-12 h-12 text-zinc-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-white font-medium mb-2",children:"Drag and drop files here"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm",children:"or click to browse"})]}),L.isPending&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-emerald-500",children:[(0,t.jsx)(x.Loader2,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm",children:"Uploading..."})]})]})}),(0,t.jsx)(w.Dialog,{open:I,onOpenChange:U,children:(0,t.jsxs)(w.DialogContent,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(w.DialogHeader,{children:(0,t.jsx)(w.DialogTitle,{className:"text-white",children:"Delete File"})}),(0,t.jsxs)("p",{className:"text-zinc-400",children:['Are you sure you want to delete "',_?.original_filename,'"? This action cannot be undone.']}),(0,t.jsxs)(w.DialogFooter,{children:[(0,t.jsx)(y.Button,{variant:"outline",onClick:()=>U(!1),className:"border-zinc-700 text-zinc-300",children:"Cancel"}),(0,t.jsxs)(y.Button,{onClick:E,disabled:O.isPending,className:"bg-red-500 hover:bg-red-600",children:[O.isPending&&(0,t.jsx)(x.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Delete"]})]})]})})]})}e.s(["default",()=>M],96272)}]);