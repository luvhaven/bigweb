(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},83864,e=>{"use strict";var a=e.i(11795);e.s(["clientsAPI",0,{async getAll(e){let t=a.supabase.from("clients").select("*, user:profiles(full_name, email, avatar_url)").order("created_at",{ascending:!1});e?.status&&(t=t.eq("status",e.status));let{data:s,error:l}=await t;if(l)throw l;return s},async getById(e){let{data:t,error:s}=await a.supabase.from("clients").select("*, user:profiles(full_name, email, avatar_url), projects(*)").eq("id",e).single();if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.supabase.from("clients").insert(e).select().single();if(s)throw s;return t},async update(e,t){let{data:s,error:l}=await a.supabase.from("clients").update(t).eq("id",e).select().single();if(l)throw l;return s},async delete(e){let{error:t}=await a.supabase.from("clients").delete().eq("id",e);if(t)throw t},async getProjects(e){let{data:t,error:s}=await a.supabase.from("projects").select("*, client:clients(company_name)").eq("client_id",e).order("created_at",{ascending:!1});if(s)throw s;return t}}])},85595,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),l=e.i(19455),i=e.i(93479),r=e.i(46696),n=e.i(83864),c=e.i(31278),d=e.i(56909),o=e.i(71689),u=e.i(22016);function m({initialData:e,isEditing:m=!1}){let p=(0,s.useRouter)(),[h,f]=(0,t.useState)(!1),[x,v]=(0,t.useState)({name:"",email:"",company:"",logo_url:"",website:""});(0,t.useEffect)(()=>{e&&v({name:e.name||"",email:e.email||"",company:e.company||"",logo_url:e.logo_url||"",website:e.website||""})},[e]);let y=async a=>{a.preventDefault(),f(!0);try{let a={contact_name:x.name,email:x.email,company_name:x.company,logo_url:x.logo_url,website:x.website};m&&e?.id?(await n.clientsAPI.update(e.id,a),r.toast.success("Client updated")):(await n.clientsAPI.create(a),r.toast.success("Client created")),p.push("/admin/clients"),p.refresh()}catch(e){r.toast.error("Failed to save client")}finally{f(!1)}};return(0,a.jsxs)("form",{onSubmit:y,className:"max-w-2xl space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(u.default,{href:"/admin/clients",children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(o.ArrowLeft,{className:"w-4 h-4"})})}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:m?"Edit Client":"New Client"})})]}),(0,a.jsxs)(l.Button,{type:"submit",disabled:h,className:"bg-accent hover:bg-accent/90",children:[h?(0,a.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(d.Save,{className:"w-4 h-4 mr-2"}),"Save Client"]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Contact Name"}),(0,a.jsx)(i.Input,{required:!0,value:x.name,onChange:e=>v({...x,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,a.jsx)(i.Input,{type:"email",value:x.email,onChange:e=>v({...x,email:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Company Name"}),(0,a.jsx)(i.Input,{required:!0,value:x.company,onChange:e=>v({...x,company:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Website URL"}),(0,a.jsx)(i.Input,{value:x.website,onChange:e=>v({...x,website:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Logo URL"}),(0,a.jsx)(i.Input,{value:x.logo_url,onChange:e=>v({...x,logo_url:e.target.value})})]})]})]})}e.s(["default",()=>m])},19979,e=>{"use strict";var a=e.i(43476),t=e.i(85595);function s(){return(0,a.jsx)(t.default,{})}e.s(["default",()=>s])}]);