(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},99682,e=>{"use strict";var a=e.i(71645);function s(e){let s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},70152,e=>{"use strict";function a(e,[a,s]){return Math.min(s,Math.max(a,e))}e.s(["clamp",()=>a])},71689,e=>{"use strict";let a=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},24687,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));r.displayName="Textarea",e.s(["Textarea",()=>r])},42025,e=>{"use strict";var a=e.i(11795);e.s(["pagesAPI",0,{async getAll(e){let s=a.supabase.from("pages").select("*, author:profiles(full_name, avatar_url)").order("created_at",{ascending:!1});e?.status&&(s=s.eq("status",e.status)),e?.author_id&&(s=s.eq("author_id",e.author_id));let{data:t,error:r}=await s;if(r)throw r;return t},async getById(e){let{data:s,error:t}=await a.supabase.from("pages").select("*, author:profiles(full_name, avatar_url)").eq("id",e).single();if(t)throw t;return s},async getBySlug(e){let{data:s,error:t}=await a.supabase.from("pages").select("*").eq("slug",e).single();if(t)throw t;return s},async create(e){let{data:s,error:t}=await a.supabase.from("pages").insert(e).select().single();if(t)throw t;return s},async update(e,s){let{data:t,error:r}=await a.supabase.from("pages").update(s).eq("id",e).select().single();if(r)throw r;return t},async delete(e){let{error:s}=await a.supabase.from("pages").delete().eq("id",e);if(s)throw s},async publish(e){let{data:s,error:t}=await a.supabase.from("pages").update({status:"published",published_at:new Date().toISOString()}).eq("id",e).select().single();if(t)throw t;return s},async incrementViews(e){let{error:s}=await a.supabase.rpc("increment_page_views",{page_id:e});if(s)throw s},async createVersion(e,s,t){let{data:r}=await a.supabase.from("page_versions").select("version_number").eq("page_id",e).order("version_number",{ascending:!1}).limit(1),i=r&&r.length>0?r[0].version_number+1:1,{data:l,error:n}=await a.supabase.from("page_versions").insert({page_id:e,content:s,version_number:i,created_by:t}).select().single();if(n)throw n;return l},async getVersions(e){let{data:s,error:t}=await a.supabase.from("page_versions").select("*, created_by:profiles(full_name)").eq("page_id",e).order("version_number",{ascending:!1});if(t)throw t;return s}}])},95461,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),r=e.i(19455),i=e.i(93479),l=e.i(24687),n=e.i(67489),c=e.i(46696),u=e.i(42025),d=e.i(31278),o=e.i(56909),m=e.i(71689),p=e.i(22016);function g({initialData:e,isEditing:g=!1}){let f=(0,t.useRouter)(),[h,v]=(0,s.useState)(!1),[x,b]=(0,s.useState)({title:"",slug:"",content:"",status:"draft"});(0,s.useEffect)(()=>{e&&b({title:e.title||"",slug:e.slug||"",content:e.content||"",status:e.status||"draft"})},[e]);let y=async a=>{a.preventDefault(),v(!0);try{g&&e?.id?(await u.pagesAPI.update(e.id,x),c.toast.success("Page updated")):(await u.pagesAPI.create(x),c.toast.success("Page created")),f.push("/admin/pages"),f.refresh()}catch(e){c.toast.error("Failed to save page")}finally{v(!1)}};return(0,a.jsxs)("form",{onSubmit:y,className:"max-w-4xl space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(p.default,{href:"/admin/pages",children:(0,a.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(m.ArrowLeft,{className:"w-4 h-4"})})}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:g?"Edit Page":"New Page"})})]}),(0,a.jsxs)(r.Button,{type:"submit",disabled:h,className:"bg-accent hover:bg-accent/90",children:[h?(0,a.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(o.Save,{className:"w-4 h-4 mr-2"}),"Save Page"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Page Title"}),(0,a.jsx)(i.Input,{required:!0,value:x.title,onChange:e=>b({...x,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Content (Markdown/HTML)"}),(0,a.jsx)(l.Textarea,{className:"min-h-[400px] font-mono",value:x.content,onChange:e=>b({...x,content:e.target.value})})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"p-6 bg-card border border-border rounded-xl space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Settings"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Slug"}),(0,a.jsx)(i.Input,{required:!0,value:x.slug,onChange:e=>b({...x,slug:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,a.jsxs)(n.Select,{value:x.status,onValueChange:e=>b({...x,status:e}),children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"draft",children:"Draft"}),(0,a.jsx)(n.SelectItem,{value:"published",children:"Published"}),(0,a.jsx)(n.SelectItem,{value:"archived",children:"Archived"})]})]})]})]})})]})]})}e.s(["default",()=>g])},75199,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),r=e.i(95461),i=e.i(42025),l=e.i(31278);function n(){let e=(0,t.useParams)(),[n,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{e.id&&o(e.id)},[e.id]);let o=async e=>{try{let a=await i.pagesAPI.getById(e);c(a)}catch(e){console.error("Error loading page:",e)}finally{d(!1)}};return u?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)(l.Loader2,{className:"animate-spin"})}):n?(0,a.jsx)(r.default,{initialData:n,isEditing:!0}):(0,a.jsx)("div",{children:"Page not found"})}e.s(["default",()=>n])}]);