(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let s=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>s],63488)},99682,e=>{"use strict";var s=e.i(71645);function t(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>t])},70152,e=>{"use strict";function s(e,[s,t]){return Math.min(t,Math.max(s,e))}e.s(["clamp",()=>s])},27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},40160,e=>{"use strict";let s=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>s],40160)},20032,e=>{"use strict";var s=e.i(11795);e.s(["contactsAPI",0,{async getAll(e){let t=s.supabase.from("contact_submissions").select("*").order("created_at",{ascending:!1});e?.status&&(t=t.eq("status",e.status));let{data:a,error:i}=await t;if(i)throw i;return a},async getById(e){let{data:t,error:a}=await s.supabase.from("contact_submissions").select("*, replied_by:profiles(full_name)").eq("id",e).single();if(a)throw a;return t},async create(e){let{data:t,error:a}=await s.supabase.from("contact_submissions").insert(e).select().single();if(a)throw a;return t},async updateStatus(e,t){let{data:a,error:i}=await s.supabase.from("contact_submissions").update({status:t}).eq("id",e).select().single();if(i)throw i;return a},async markAsReplied(e,t,a){let{data:i,error:r}=await s.supabase.from("contact_submissions").update({status:"replied",replied_at:new Date().toISOString(),replied_by:t,notes:a}).eq("id",e).select().single();if(r)throw r;return i},async delete(e){let{error:t}=await s.supabase.from("contact_submissions").delete().eq("id",e);if(t)throw t},async exportToCSV(){let{data:e,error:t}=await s.supabase.from("contact_submissions").select("*").order("created_at",{ascending:!1});if(t)throw t;return e&&0!==e.length?[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).map(e=>"string"==typeof e&&e.includes(",")?`"${e}"`:e).join(","))].join("\n"):""}}])},87414,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(46932),i=e.i(55436),r=e.i(63488),l=e.i(27612),n=e.i(40160),c=e.i(22016),o=e.i(20032),d=e.i(19455),u=e.i(93479),m=e.i(46696),x=e.i(67489);function h(){let[e,h]=(0,t.useState)([]),[p,b]=(0,t.useState)(!0),[f,y]=(0,t.useState)(""),[g,j]=(0,t.useState)("");(0,t.useEffect)(()=>{v()},[g]);let v=async()=>{try{let e=await o.contactsAPI.getAll(g?{status:g}:void 0);h(e||[])}catch(e){m.toast.error("Failed to load submissions")}finally{b(!1)}},w=async s=>{if(confirm("Delete this submission?"))try{await o.contactsAPI.delete(s),h(e.filter(e=>e.id!==s)),m.toast.success("Submission deleted")}catch(e){m.toast.error("Failed to delete")}},N=async()=>{try{let e=await o.contactsAPI.exportToCSV(),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`contacts_${new Date().toISOString().split("T")[0]}.csv`,a.click(),m.toast.success("Exported to CSV")}catch(e){m.toast.error("Failed to export")}},S=e.filter(e=>e.name?.toLowerCase().includes(f.toLowerCase())||e.email?.toLowerCase().includes(f.toLowerCase())||e.company?.toLowerCase().includes(f.toLowerCase())||e.message?.toLowerCase().includes(f.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Contact Submissions"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage inquiries and messages"})]}),(0,s.jsxs)(d.Button,{onClick:N,variant:"outline",className:"gap-2",children:[(0,s.jsx)(n.Download,{className:"w-4 h-4"})," Export CSV"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 bg-card p-4 rounded-xl border border-border",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,s.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(u.Input,{placeholder:"Search submissions...",value:f,onChange:e=>y(e.target.value),className:"pl-9"})]}),(0,s.jsxs)(x.Select,{value:g,onValueChange:j,children:[(0,s.jsx)(x.SelectTrigger,{className:"w-[180px]",children:(0,s.jsx)(x.SelectValue,{placeholder:"All statuses"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"",children:"All"}),(0,s.jsx)(x.SelectItem,{value:"new",children:"New"}),(0,s.jsx)(x.SelectItem,{value:"read",children:"Read"}),(0,s.jsx)(x.SelectItem,{value:"replied",children:"Replied"})]})]})]}),p?(0,s.jsx)("div",{className:"text-center py-20",children:"Loading submissions..."}):0===S.length?(0,s.jsxs)("div",{className:"text-center py-20 bg-card rounded-xl border border-border border-dashed",children:[(0,s.jsx)(r.Mail,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No submissions found"})]}):(0,s.jsx)("div",{className:"space-y-4",children:S.map((e,t)=>(0,s.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"bg-card border border-border rounded-xl p-6 hover:shadow-lg transition-all",children:(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,s.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"new"===e.status?"bg-blue-500/10 text-blue-500":"replied"===e.status?"bg-green-500/10 text-green-500":"bg-secondary text-muted-foreground"}`,children:e.status})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.Mail,{className:"w-4 h-4"}),e.email]}),e.phone&&(0,s.jsx)("span",{children:e.phone}),e.company&&(0,s.jsxs)("span",{children:["â€¢ ",e.company]})]}),(0,s.jsxs)("div",{className:"text-sm mb-3 bg-secondary/20 p-3 rounded-lg",children:[e.subject&&(0,s.jsx)("div",{className:"font-medium mb-1",children:e.subject}),(0,s.jsx)("p",{className:"text-muted-foreground line-clamp-2",children:e.message})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Received ",new Date(e.created_at).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.default,{href:`/admin/contacts/${e.id}`,children:(0,s.jsx)(d.Button,{variant:"outline",size:"sm",children:"View Details"})}),(0,s.jsx)(d.Button,{variant:"ghost",size:"icon",className:"text-red-500",onClick:()=>w(e.id),children:(0,s.jsx)(l.Trash2,{className:"w-4 h-4"})})]})]})},e.id))})]})}e.s(["default",()=>h])}]);