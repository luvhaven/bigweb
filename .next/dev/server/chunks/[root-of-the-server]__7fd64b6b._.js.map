{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/bigweb-ff2/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/bigweb-ff2/src/lib/analytics-utils.ts"],"sourcesContent":["\r\n/**\r\n * Analytics Utility Functions\r\n * Handles User-Agent parsing and other analytics helpers without external dependencies.\r\n */\r\n\r\nexport interface UserAgentInfo {\r\n    browser: string;\r\n    os: string;\r\n    device: 'mobile' | 'tablet' | 'desktop';\r\n}\r\n\r\nexport function parseUserAgent(ua: string): UserAgentInfo {\r\n    const lowerUA = ua.toLowerCase();\r\n\r\n    // Detect Device\r\n    let device: 'mobile' | 'tablet' | 'desktop' = 'desktop';\r\n    if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(lowerUA)) {\r\n        device = 'tablet';\r\n    } else if (\r\n        /Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(\r\n            ua\r\n        )\r\n    ) {\r\n        device = 'mobile';\r\n    }\r\n\r\n    // Detect OS\r\n    let os = 'Unknown OS';\r\n    if (lowerUA.includes('windows')) os = 'Windows';\r\n    else if (lowerUA.includes('mac os')) os = 'macOS';\r\n    else if (lowerUA.includes('linux')) os = 'Linux';\r\n    else if (lowerUA.includes('android')) os = 'Android';\r\n    else if (lowerUA.includes('ios') || lowerUA.includes('iphone') || lowerUA.includes('ipad')) os = 'iOS';\r\n\r\n    // Detect Browser\r\n    let browser = 'Unknown Browser';\r\n    if (lowerUA.includes('firefox')) browser = 'Firefox';\r\n    else if (lowerUA.includes('samsung')) browser = 'Samsung Internet';\r\n    else if (lowerUA.includes('opera') || lowerUA.includes('opr')) browser = 'Opera';\r\n    else if (lowerUA.includes('edge')) browser = 'Edge';\r\n    else if (lowerUA.includes('chrome')) browser = 'Chrome';\r\n    else if (lowerUA.includes('safari')) browser = 'Safari';\r\n    else if (lowerUA.includes('trident') || lowerUA.includes('msie')) browser = 'Internet Explorer';\r\n\r\n    return { browser, os, device };\r\n}\r\n\r\nexport function getCountryFromHeaders(headers: Headers): string | null {\r\n    // Check standard headers used by Vercel, Cloudflare, Netlify, etc.\r\n    return (\r\n        headers.get('x-vercel-ip-country') ||\r\n        headers.get('cf-ipcountry') ||\r\n        headers.get('x-country-code') ||\r\n        null\r\n    );\r\n}\r\n\r\nexport function getCityFromHeaders(headers: Headers): string | null {\r\n    return (\r\n        headers.get('x-vercel-ip-city') ||\r\n        headers.get('x-city') ||\r\n        null\r\n    );\r\n}\r\n"],"names":[],"mappings":"AACA;;;CAGC;;;;;;;;AAQM,SAAS,eAAe,EAAU;IACrC,MAAM,UAAU,GAAG,WAAW;IAE9B,gBAAgB;IAChB,IAAI,SAA0C;IAC9C,IAAI,mDAAmD,IAAI,CAAC,UAAU;QAClE,SAAS;IACb,OAAO,IACH,sGAAsG,IAAI,CACtG,KAEN;QACE,SAAS;IACb;IAEA,YAAY;IACZ,IAAI,KAAK;IACT,IAAI,QAAQ,QAAQ,CAAC,YAAY,KAAK;SACjC,IAAI,QAAQ,QAAQ,CAAC,WAAW,KAAK;SACrC,IAAI,QAAQ,QAAQ,CAAC,UAAU,KAAK;SACpC,IAAI,QAAQ,QAAQ,CAAC,YAAY,KAAK;SACtC,IAAI,QAAQ,QAAQ,CAAC,UAAU,QAAQ,QAAQ,CAAC,aAAa,QAAQ,QAAQ,CAAC,SAAS,KAAK;IAEjG,iBAAiB;IACjB,IAAI,UAAU;IACd,IAAI,QAAQ,QAAQ,CAAC,YAAY,UAAU;SACtC,IAAI,QAAQ,QAAQ,CAAC,YAAY,UAAU;SAC3C,IAAI,QAAQ,QAAQ,CAAC,YAAY,QAAQ,QAAQ,CAAC,QAAQ,UAAU;SACpE,IAAI,QAAQ,QAAQ,CAAC,SAAS,UAAU;SACxC,IAAI,QAAQ,QAAQ,CAAC,WAAW,UAAU;SAC1C,IAAI,QAAQ,QAAQ,CAAC,WAAW,UAAU;SAC1C,IAAI,QAAQ,QAAQ,CAAC,cAAc,QAAQ,QAAQ,CAAC,SAAS,UAAU;IAE5E,OAAO;QAAE;QAAS;QAAI;IAAO;AACjC;AAEO,SAAS,sBAAsB,OAAgB;IAClD,mEAAmE;IACnE,OACI,QAAQ,GAAG,CAAC,0BACZ,QAAQ,GAAG,CAAC,mBACZ,QAAQ,GAAG,CAAC,qBACZ;AAER;AAEO,SAAS,mBAAmB,OAAgB;IAC/C,OACI,QAAQ,GAAG,CAAC,uBACZ,QAAQ,GAAG,CAAC,aACZ;AAER","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/bigweb-ff2/app/api/analytics/track/route.ts"],"sourcesContent":["\r\nimport { NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/prisma';\r\nimport { parseUserAgent, getCountryFromHeaders, getCityFromHeaders } from '@/lib/analytics-utils';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { type, data } = body;\r\n        const headers = request.headers;\r\n        const userAgent = headers.get('user-agent') || '';\r\n\r\n        // Parse User Agent and Geo Data\r\n        const uaInfo = parseUserAgent(userAgent);\r\n        const country = getCountryFromHeaders(headers) || 'Unknown';\r\n        const city = getCityFromHeaders(headers) || 'Unknown';\r\n\r\n        if (type === 'pageview') {\r\n            await prisma.pageView.create({\r\n                data: {\r\n                    page: data.page,\r\n                    referrer: data.referrer || null,\r\n                    userAgent: userAgent,\r\n                    sessionId: data.sessionId,\r\n                    country,\r\n                    city,\r\n                    device: uaInfo.device,\r\n                    browser: uaInfo.browser,\r\n                    os: uaInfo.os,\r\n                },\r\n            });\r\n        } else if (type === 'event') {\r\n            await prisma.event.create({\r\n                data: {\r\n                    event: data.event,\r\n                    category: data.category,\r\n                    label: data.label,\r\n                    value: data.value,\r\n                    metadata: data.metadata,\r\n                },\r\n            });\r\n        }\r\n\r\n        return NextResponse.json({ success: true });\r\n    } catch (error) {\r\n        console.error('Analytics Error:', error);\r\n        return NextResponse.json({ success: false, error: 'Failed to track' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG;QACvB,MAAM,UAAU,QAAQ,OAAO;QAC/B,MAAM,YAAY,QAAQ,GAAG,CAAC,iBAAiB;QAE/C,gCAAgC;QAChC,MAAM,SAAS,IAAA,oJAAc,EAAC;QAC9B,MAAM,UAAU,IAAA,2JAAqB,EAAC,YAAY;QAClD,MAAM,OAAO,IAAA,wJAAkB,EAAC,YAAY;QAE5C,IAAI,SAAS,YAAY;YACrB,MAAM,gIAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;gBACzB,MAAM;oBACF,MAAM,KAAK,IAAI;oBACf,UAAU,KAAK,QAAQ,IAAI;oBAC3B,WAAW;oBACX,WAAW,KAAK,SAAS;oBACzB;oBACA;oBACA,QAAQ,OAAO,MAAM;oBACrB,SAAS,OAAO,OAAO;oBACvB,IAAI,OAAO,EAAE;gBACjB;YACJ;QACJ,OAAO,IAAI,SAAS,SAAS;YACzB,MAAM,gIAAM,CAAC,KAAK,CAAC,MAAM,CAAC;gBACtB,MAAM;oBACF,OAAO,KAAK,KAAK;oBACjB,UAAU,KAAK,QAAQ;oBACvB,OAAO,KAAK,KAAK;oBACjB,OAAO,KAAK,KAAK;oBACjB,UAAU,KAAK,QAAQ;gBAC3B;YACJ;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC7C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACzF;AACJ","debugId":null}}]
}