{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { createMiddlewareClient } from '@supabase/auth-helpers-nextjs'\r\nimport { NextResponse, type NextRequest } from 'next/server'\r\n\r\nexport async function middleware(request: NextRequest) {\r\n    const res = NextResponse.next()\r\n    const supabase = createMiddlewareClient({ req: request, res })\r\n\r\n    const {\r\n        data: { session },\r\n    } = await supabase.auth.getSession()\r\n\r\n    // Protect admin routes\r\n    if (request.nextUrl.pathname.startsWith('/admin')) {\r\n        if (!session) {\r\n            return NextResponse.redirect(new URL('/admin/login', request.url))\r\n        }\r\n\r\n        // Check if user has admin or editor role\r\n        const { data: profile } = await supabase\r\n            .from('profiles')\r\n            .select('role')\r\n            .eq('id', session.user.id)\r\n            .single()\r\n\r\n        if (!profile || !['admin', 'editor'].includes(profile.role)) {\r\n            return NextResponse.redirect(new URL('/unauthorized', request.url))\r\n        }\r\n    }\r\n\r\n    // Protect client routes\r\n    if (request.nextUrl.pathname.startsWith('/client')) {\r\n        if (!session) {\r\n            return NextResponse.redirect(new URL('/client/login', request.url))\r\n        }\r\n    }\r\n\r\n    return res\r\n}\r\n\r\nexport const config = {\r\n    matcher: ['/admin/:path*', '/client/:path*'],\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAEO,eAAe,WAAW,OAAoB;IACjD,MAAM,MAAM,gMAAY,CAAC,IAAI;IAC7B,MAAM,WAAW,IAAA,0MAAsB,EAAC;QAAE,KAAK;QAAS;IAAI;IAE5D,MAAM,EACF,MAAM,EAAE,OAAO,EAAE,EACpB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,uBAAuB;IACvB,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW;QAC/C,IAAI,CAAC,SAAS;YACV,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,gBAAgB,QAAQ,GAAG;QACpE;QAEA,yCAAyC;QACzC,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EACxB,MAAM;QAEX,IAAI,CAAC,WAAW,CAAC;YAAC;YAAS;SAAS,CAAC,QAAQ,CAAC,QAAQ,IAAI,GAAG;YACzD,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAiB,QAAQ,GAAG;QACrE;IACJ;IAEA,wBAAwB;IACxB,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY;QAChD,IAAI,CAAC,SAAS;YACV,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAiB,QAAQ,GAAG;QACrE;IACJ;IAEA,OAAO;AACX;AAEO,MAAM,SAAS;IAClB,SAAS;QAAC;QAAiB;KAAiB;AAChD"}}]
}